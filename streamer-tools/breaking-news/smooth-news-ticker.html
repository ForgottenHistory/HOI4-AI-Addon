<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seamless News Ticker</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            font-family: 'Arial', sans-serif;
            color: white;
        }

        .ticker-container {
            position: relative;
            width: 100%;
            height: 50px;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .ticker-content {
            position: absolute;
            display: flex;
            white-space: nowrap;
            line-height: 50px;
            font-size: 18px;
            font-weight: 500;
            will-change: transform;
        }

        .ticker-item {
            padding: 0 50px;
            display: inline-block;
        }

        /* Fade edges for smoother visual */
        .ticker-container::before,
        .ticker-container::after {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            width: 50px;
            z-index: 2;
            pointer-events: none;
        }

        .ticker-container::before {
            left: 0;
            background: linear-gradient(to right, rgba(102, 126, 234, 1), transparent);
        }

        .ticker-container::after {
            right: 0;
            background: linear-gradient(to left, rgba(118, 75, 162, 1), transparent);
        }

        .controls {
            margin-top: 30px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        button:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .info {
            margin-top: 20px;
            padding: 15px;
            background: #2a2a2a;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
        }

        .status {
            margin-top: 15px;
            padding: 10px;
            background: #333;
            border-radius: 6px;
            font-size: 13px;
            color: #aaa;
        }
    </style>
</head>
<body>
    <div class="ticker-container">
        <div class="ticker-content" id="ticker">
            <!-- Content will be dynamically generated -->
        </div>
    </div>

    <div class="controls">
        <button onclick="updateNews()">Update News (No Jump!)</button>
        <button onclick="addSingleItem()">Add Single Item</button>
        <button onclick="changeSpeed('slow')">Slow Speed</button>
        <button onclick="changeSpeed('normal')">Normal Speed</button>
        <button onclick="changeSpeed('fast')">Fast Speed</button>
        <button onclick="togglePause()">Pause/Resume</button>
    </div>

    <div class="info">
        <strong>JavaScript-Controlled Solution:</strong><br>
        • Position maintained during updates - no jumps!<br>
        • Smooth continuous scrolling with requestAnimationFrame<br>
        • Triple buffer for seamless looping<br>
        • Dynamic content updates without interruption<br>
        • Speed changes preserve current position
    </div>

    <div class="status" id="status">
        Current news items: <span id="itemCount">0</span> | Position: <span id="position">0</span>px
    </div>

    <script>
        // Sample news items
        const newsItems = [
            "Nation Unveils New Summer Camp Program Featuring Mandatory Matching Outfits",
            "Italy Switches Sides in War After Discovering Pasta Shortage on Axis",
            "Local Man Discovers Time Travel, Returns to Present Because 'Wi-Fi Was Terrible'",
            "Scientists Confirm: Cats Have Been Judging Humans Since Ancient Egypt",
            "Breaking: Internet Outage Causes Productivity to Skyrocket Worldwide",
            "Weather Update: Meteorologist Admits Just Making It Up at This Point",
            "Study Shows 90% of Meetings Could Have Been Emails, Remaining 10% Could Have Been Ignored",
            "Tech Company Announces AI That Procrastinates Just Like Humans",
            "Breaking News: Coffee Declared a Vegetable by Sleep-Deprived Scientists",
            "Local Gym Introduces 'Netflix and Treadmill' Membership Tier",
            "Quantum Computer Successfully Calculates Meaning of Life, Answer Still 42",
            "Millennials Killing Industry of Killing Industries, Experts Worried",
            "Dog Elected Mayor, Approval Rating at All-Time High of 100%",
            "Scientists Discover Procrastination is Hereditary, Will Study It Later"
        ];

        let currentNewsIndex = 0;
        let newsString = "";
        let position = 0;
        let speed = 1; // pixels per frame
        let isPaused = false;
        let animationId = null;
        let tickerElement = null;
        let singleItemWidth = 0;

        function initializeTicker() {
            tickerElement = document.getElementById('ticker');
            
            // Create initial news string
            newsString = newsItems.slice(0, 5).join(" • ");
            
            // Create triple buffer content
            updateTickerContent();
            
            // Start animation
            animate();
        }

        function updateTickerContent() {
            // Clear existing content
            tickerElement.innerHTML = '';
            
            // Create three copies for seamless loop
            for (let i = 0; i < 3; i++) {
                const span = document.createElement('span');
                span.className = 'ticker-item';
                span.textContent = newsString;
                tickerElement.appendChild(span);
            }
            
            // Calculate width of single item for loop reset
            const firstItem = tickerElement.querySelector('.ticker-item');
            if (firstItem) {
                singleItemWidth = firstItem.offsetWidth;
            }
            
            updateStatus();
        }

        function animate() {
            if (!isPaused) {
                position -= speed;
                
                // Reset position when first item is completely off screen
                if (Math.abs(position) >= singleItemWidth) {
                    position += singleItemWidth;
                }
                
                tickerElement.style.transform = `translateX(${position}px)`;
                
                // Update position display
                document.getElementById('position').textContent = Math.round(position);
            }
            
            animationId = requestAnimationFrame(animate);
        }

        function updateNews() {
            // Save current relative position within the cycle
            const relativePosition = Math.abs(position) % singleItemWidth;
            
            // Update news content
            currentNewsIndex = (currentNewsIndex + 4) % newsItems.length;
            const endIndex = Math.min(currentNewsIndex + 5, newsItems.length);
            let selectedNews = newsItems.slice(currentNewsIndex, endIndex);
            
            if (selectedNews.length < 5) {
                selectedNews = selectedNews.concat(newsItems.slice(0, 5 - selectedNews.length));
            }
            
            newsString = selectedNews.join(" • ");
            
            // Update content
            updateTickerContent();
            
            // Restore position to maintain continuous flow
            position = -relativePosition;
        }

        function addSingleItem() {
            // Save relative position
            const relativePosition = Math.abs(position) % singleItemWidth;
            
            // Add item to string
            const randomIndex = Math.floor(Math.random() * newsItems.length);
            newsString += " • " + newsItems[randomIndex];
            
            // Update content
            updateTickerContent();
            
            // Restore position
            position = -relativePosition;
        }

        function changeSpeed(newSpeed) {
            const speeds = {
                'slow': 0.5,
                'normal': 1,
                'fast': 2
            };
            
            speed = speeds[newSpeed];
        }

        function togglePause() {
            isPaused = !isPaused;
        }

        function updateStatus() {
            const itemCount = newsString.split(' • ').length;
            document.getElementById('itemCount').textContent = itemCount;
        }

        // Initialize on load
        window.addEventListener('load', initializeTicker);

        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ') {
                e.preventDefault();
                togglePause();
            } else if (e.key === 'ArrowRight') {
                changeSpeed('fast');
            } else if (e.key === 'ArrowLeft') {
                changeSpeed('slow');
            } else if (e.key === 'u') {
                updateNews();
            }
        });

        // Auto-update every 20 seconds (optional)
        setInterval(() => {
            if (!isPaused) {
                // Uncomment to enable auto-updates
                // updateNews();
            }
        }, 20000);

        // Cleanup on page unload
        window.addEventListener('beforeunload', () => {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
        });
    </script>
</body>
</html>